<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>

        body{

           overflow-x:hidden;
           
        }
        .card-gradient{
            background-color: rgba(255, 255, 255, 0.4);
            -webkit-backdrop-filter: blur(15px);
            backdrop-filter: blur(25px);
            position:fixed;

        }

        .center-obj{
            margin: auto;
            overflow: hidden;
        }
        img{
            height:250px;
        }
    </style>
    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
    <!-- JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/peerjs@1.4.7/dist/peerjs.min.js"></script>

</head>
<body class="bg-light">

    <nav class="navbar  card-gradient">
        <div class="container-fluid">
          <a class="navbar-brand m-2"><b>TMCS</b></a>
          <div class="d-flex">
            {%if info['USER_NAME']==none %}
                <a href="/signup" class="btn btn-outline-primary m-2">Signup</a>
                <a href="/login" class="btn btn-primary m-2">Login</a>
            {%else%}
                <a href="/logout" class="btn btn-dark m-2">Logout</a>
            {%endif%}
          </div>
        </div>
    </nav>

    <div class="container mt-6">

        <div class="row my-5 fs-1">
            <h1 class ="mt-5 text-center"> Welcome to TMCS</h1>
        </div>

        <div class="row">
          <div class="col-sm-8">
            <div class="m-4">
                <h1 class="my-4">
                    Real-time patient monitoring
                    and meet with doctor
                </h1>
                <p class="my-4 ">
                    Lorem ipsum dolor sit amet consectetur, adipisicing elit. Molestias a delectus sunt, labore, architecto laborum et totam dolorum dolorem perspiciatis assumenda quo sint minus sed vel. Perferendis repudiandae iusto ea dolores libero aliquam ad placeat itaque, assumenda ratione ex unde mollitia odio quia beatae. Voluptate quaerat, eum aperiam nostrum atque ad error, reiciendis eveniet adipisci quas impedit fuga vero dolorem dolore quisquam quidem ipsa accusantium. Voluptatem nam libero ipsum, dignissimos labore, quos, nulla eaque tempore incidunt itaque aut quidem suscipit!
                </p>
                <p>
                    <a href="#">Download patient app</a>
                </p>
                <p class="my-4">
                    <button id="create-meeting" class="btn btn-primary m-2" {%if info['USER_NAME']==none %} disabled {%endif%} >create meeting</button>
                    or
                    <a href="#join-meet-section" class="btn btn-outline-primary m-2">Join meeting</a>
                </p>
                <ul class="list-group list-group-flush my-4" >
                    <li id="show-id" class="list-group-item">New meeting id</li>
                </ul>
                <hr>
            </div>
          </div>
          <div class="col-sm-4"></div>
        </div>

        <div class="row"></div>
<!--
        <div class="row my-5" id="join-meet-section">

            <h1 class=" col-sm-12 text-center m-4">Medical History tracking</h1>
            <a href="{{url_for('form_medical_history')}}" class="btn btn-outline-primary m-2">form</a>

        </div>
-->

        <div class="row"></div>

        <div class="row my-5" id="join-meet-section">

            <h1 class=" col-sm-12 text-center m-4">Join Meeting</h1>


            <div class="col-sm-6 mt-5 ">
                <div class="card mx-auto " style="width: 42vh;">
                    <!--
                    <img src="https://s3-alpha-sig.figma.com/img/1628/4734/0572b38c73e88232454681a42f3522cb?Expires=1662940800&Signature=SOx3XsWlm5NdAGdOrEsFLiloHcIgEJcZYlrUcKhf9iRMedOJfiIRG0rTmhGz7ICwmBW1lGH0EvqDNq~-uk97Kzmc0o0DB4Db~BmoFpEs6MYwAQR8zTYFUb8sa6RwNSiaEI6O2ota80S~cVRE1efNCqUSu1SiLP~YFp3oPFG5YWU8ns6kpsUO8OsgHZupoXapXkcuKnniq-nML8JMPKO23uEopAoIkrvwBSZkXnZyiJ6-CO9b4QedSxRzfpVvnpdDAoztaduvYiSaMC3QJFP2RGG5er~9HGGJEvt5HZyOmP~RAtoIgEwB1MLFgBab9F4gkkCv8c7PXJxRYboCVtjEsw__&Key-Pair-Id=APKAINTVSUGEWH5XD5UA" class="card-img-top" alt="...">
                    -->
                    <div class="card-body">
                      <h5 class="card-title">Patient</h5>
                      <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                      <form action="/patient"  method="POST">
                        <div class="mb-3">
                            <input type="text" id="inputText"  name="meetingId" class="form-control" placeholder="Enter Meeting ID">
                        </div>
                        <div class="mb-3">
                            <button type="submit" class="btn  btn-success">Join</button>
                        </div>
                      </form>

                    </div>
                </div>
            </div>

            <div class="col-sm-6 mt-5">
                <div class="card mx-auto " style="width: 42vh;">
                    <!--
                        <img src="https://s3-alpha-sig.figma.com/img/c0dd/6e92/1dbbc0731ab41ec1b3da6b1f63d3369b?Expires=1662940800&Signature=HBlRMPmRw-JTrAG4HDvVUH~DsA3bu835QsHVN7uv-Li2L-TSw7BmDxxtGJATPBNgG24q7o-dnK0yUaFnhw7n4~Ish5hdcS8FZmiuqsJV6EZh2nfTxPHpFRvsGI6Ukm3V~BsM9AR3aqYYAcZyq7RcibOr2p9XDq43HqtPZ5gXH6TG0mU2MZtt5v~OCo8aKK8n-pQYnJZoWs8h0Bk9fB8XhknAhLYv4l~c-SnhflyFQ0RW50NW7DW9bpFfusGJBy1O2eRAWK0EraA4svMTNhbYysI1gShFG8IbQcei3SCf62RnrgqCEFZWuowfKfiTQEq2nnEtizgdIluOjNqGKS4yMA__&Key-Pair-Id=APKAINTVSUGEWH5XD5UA" class="card-img-top" alt="...">
                    -->
                    <div class="card-body">
                      <h5 class="card-title">Doctor</h5>
                      <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                      <form action="/doctor" method="POST">
                        <div class="mb-3">
                            <input type="text" id="inputText" name="meetingId" class="form-control" placeholder="Enter Meeting ID">
                        </div>
                        <div class="mb-3">
                            <button type="submit" class="btn  btn-success">Join</button>
                        </div>
                      </form>
                    </div>
                </div>
            </div>

          </div>
      </div>

    <script src="https://code.jquery.com/jquery-1.9.1.min.js"></script>

    <script type="text/javascript">
        
        $('#create-meeting').on('click',function(){
            let peer= new Peer();
            document.getElementById("show-id").innerHTML = "loading...";
            peer.on('open',function(peerID){
                console.log("My peer ID is "+peerID);
                console.log(peerID);
                const PEERID = peerID;
                const url="/create-meeting?USER_ID=info['USER_ID']&peer="+PEERID;
                fetch(url)
                    .then((response) => response.json())
                    .then((data) => document.getElementById("show-id").innerHTML = data['ROOM_ID'])
            });
        });
        
      </script>

</body>
</html>
